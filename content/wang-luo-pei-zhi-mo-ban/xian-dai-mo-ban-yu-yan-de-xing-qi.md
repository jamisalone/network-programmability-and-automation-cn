---
description: The Rise of Modern Template Languages
---

# 现代模板语言的兴起

现实情况中，模板技术已经存在了非常长的时间了。只对“模板语言”进行基本搜索，就能看到众多模板语言，其中最常见的一点是每种编程语言都有对应的几种模板语言可以选择。

你可能会注意到，大多数模板语言已经在web开发行业有深入的应用了。这是因为大多数web都是基于模板的！开发人员不是为社交媒体网站上每个一个用户资料页编写HTML文件，而是会编写一个HTML文件，并根据后端呈现的数据，动态地将值插入模板中。

简而言之，模板语言有各种各样的相关用例。他们\(模板语言\)在web开发中产生，这章我们讨论使用它们来进行网络配置\(network configuration\)，不过它们也几乎应用于所有**基于文本的媒介\(text-based medium\)**，包括文档和报告。

一定要记住，**模板的使用包括三个部分**。_第一_，模板需要被编写\(即要模板的使用首先需要有模板\)。还必须记住\(_第二_\)，你需要某种形式的数据，这些数据最终会被输入到模板中，以产生一些有意义的工作，如网络配置。然后，引出_第三点_——必需一个“驱动”来使数据进入模板。这个“驱动”可以是自动化工具Ansible\(在第九章涉及\)，或者可以使用Python语言来自己创造“驱动”，这在该章后面的内容中涉及。仅仅是**模板本身是没有作用的**。

{% hint style="info" %}
大多数模板语言并不是纯粹意义上的完整“编程语言”\(full-on "programming languages"\) ——更多时候，一种模板语言与另一种驱动数据进行模板的语言紧密相连。因此，每个模板语言与其“父”语言\("parent" language\)之间会有一些相似之处。后面的内容会用一个很好的例子进行大量讨论：Jinja是一个模板语言，它来自一个以Python为中心的社区，所以它们之间有一些非常明显的相似之处。  
所以，如果你想知道使用哪种模板语言，最好是先决定使用你所依附的“父”语言\(可以通过编写你自己的代码，或者使用像Ansible这样的现有工具\)，然后从“父”语言的角度出发选择模板语言。
{% endhint %}

正如前面提到的，模板语言不见得是一个新的概念，但我们从中开到新的想法，甚至整个语言一直都在进入生态系统。如果你看一下模板语言的历史，其中很多模板语言都是服务于web的一个重要部分：动态内容\(dynamic content\)。这在今天很容易被认为是理所当然的，但回到web才刚刚起步时，大多数网站都是由静态内容简历的，动态加载数据内容到页面对web来说是向前迈进了一大步。

## 使用模板进行web开发

Django是一种基于Python的we框架，并且是使用这个概念\(Python-based web framework\)的一个流行的现代例子。Django有一个模板语言，它允许web开发者以同样的方式创建web内容，也提供了一种方法使页面内容动态化。使用Django模板语言，开发者可以在用户请求页面时，指定一个原本为静态页面的部分内容，使其加载动态数据。

下面是一个简单的例子——注意，这看起来很像一个HTML文档，但是某些部分用变量进行了替换\(使用`{{}}`注释表示\)

```markup
<h1>{{ title }}</h1>

{% for article in article_list %}
<h2>
    <a href="{{ article.get_absolute_url }}">
        {{ article.headline|upper }}
    </a>
</h2>
{% endfor %}
```

当用户加载页面时，这个模板会被Django渲染\(rendered\)。此时，Django框架将填充\(populate\)`title`和`article_list`变量，然后用户会收到被真实数据完全填充\(populate\)的页面。开发者不需要为用户想要检索的每一个可能的信息写一个静态HTML页面——这是由这个web应用的后端逻辑所管理的。

{% hint style="info" %}
Django模板语言与模板语言Jinja非常相似，这会在该章节后面深入谈论。不要担心语法，这会提到。现在，我们只需关注模板所提供的概念和价值：一致性\(consistency\)。
{% endhint %}

还有很多其它的模板语言，我们在本章没有时间去介绍，但你应该知道它们的存在。光是Python就有好几种模板语言可供选择，如前面提到的Django和Jinja语言，还有[Mako](https://www.makotemplates.org/)和[Genshi](https://genshi.edgewall.org/)。其他语言如[Go](https://golang.org/pkg/text/template/)和[Ruby](https://ruby-doc.org/stdlib-2.3.0/libdoc/erb/rdoc/ERB.html)也有内置的模板系统。同样，需要记住的是，用数据填充模板这个重要工作是这些语言的一种作用，所以这是决定使用哪个模板语言的首要因素。更多的时候，**最好的选择是为该语言构建的模板系统**。

## 扩大模板的使用范围

最后，需要注意的是，模板的概念，尤其是本章中讨论的那些概念，不是专门针对任何单一用例的，而是可以运用于几乎所有基于文本的媒介。我们将在本章中详细介绍如何使用模板来进行网络配置，但正如我们刚才所探讨的，模板还可以用来构建动态网页。实际上，我们可以用模板来完成一些更通用的工作，例如一个基本的报表。可能你只是从网络设备中拉取数据，然后想要使用这些数据生成一份漂亮的报告，并将它通过电子邮件发送给一些同事。例6-1是一个使用Jinja模板生成包含VLAN列表的一个报告。

{% code title="例6-1" %}
```markup
| VLAN ID | NAME | STATUS |
| ------- |------| -------|
{% for vlan in vlans %}
| {{ vlan.get('vlan_id') }} | {{ vlan.get('name') }} | {{ vlan.get('status') }} |
{% endfor %}
```
{% endcode %}

因为我们实际上只是在处理文本，我们可以为它创建一个模板。当你深入学习像Jinja这样的模板技术时，请记住一点——模板的应用**远超**我们在本章中所探讨的有限的\(narrow\)用例。

