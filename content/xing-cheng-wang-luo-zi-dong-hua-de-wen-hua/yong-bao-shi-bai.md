---
description: Embracing Failure
---

# 拥抱失败

人们很容易对超大规模的网络公司谈论“快速出现故障\(failing fast\)”、“拥抱故障\(embracing failure\)”产生厌倦。这听起来确实有点荒谬，不是吗？基础设施层的故障通常会带来严重的经济损失，所以也难怪这些想法会受到一些反对。

然而，这种反对往往源于误解了这些口号背后的原则。“拥抱故障”的重点并不是说故障是好的。并非如此。但是，尽管故障是很糟糕的，但重复的故障要糟糕得多。“快速出现故障”背后的理念是绝不以同样的方式出现两次故障。带着故障会发生的假设去做\(因为它将会发生\)，并为你如何从故障中学习拟定计划。一些大规模的网络公司之所以对故障感到兴奋，是因为以他们的工作流程和文化来看，出现故障通常代表着是未见过的故障，他们就可以着手去解决一个新的问题。然后他们可以调整或构建他们的系统以考虑到这个故障。

因此，对于我们其他人来说，拥抱故障的想法是相同。我们的想法是要从故障中学习，不管是你所使用的技术中的一个错误\(bug\)导致的宕机，还是在自动化工作流程或脚本上的不准确键入，导致数据中心瘫痪。不管有没有自动化，故障都会发生；关键是要了解并计划你的组织将如何应对它。

{% hint style="info" %}
这就是为什么自动化测试如此重要。将测试落实到位意味着，当变更发生时，测试是必需的——它们实际上是变更如何投入生产环境的一部分。你的自动化测试是之前所学到的机器语言版本。我们在第10章讨论了自动化测试。
{% endhint %}

在上一节中，我们谈到了获得业务领导支持的重要性，业务部门的支持也是自动化测试的一个重要原因。无论你处于自动化的哪个阶段，失败都是IT的一个自然现象。获得业务部门的支持，可以将关于拆解那些“疯狂脚本”的对话转变为关于从故障中学习并确保不会发生两次的对话。进行适当的事后分析，定位问题发生的位置，将数据带入对话交谈中并进行分析，而不是归责与谁。故障并不总是意味着你做错了事，它也可能是你的技术栈或技能组合\(skill sets\)正在成熟并经历成长的痛苦的标志。在你的架构讨论，以及在与业务部门进行资源和目标协调时，都要包括“如果...将会怎么样”的场景。将故障计划添加到你所做的每一件事中，这样，当大家不得不赶到**网络运维中心** \(NOC，Network Operation Center\)去修复故障时，就不会出现意外。

故障也是自动化崩溃以及组织恢复为手动流程的一个非常常见的原因。它可能发生得非常微妙。尤其是在网络自动化场景中，当事情出错时，绕过自动化很容易，直接登录基础设施节点，就像在自动化落地之前你进行手动设备管理那样。根据自动化落地的程度，绕过自动化进行手工管理可能是解决问题的唯一方法，所以这并不总是一件坏事。

但是，衡量一个组织的“自动化健康”的一个很好的试金石是该组织在故障发生后如何处理自动化。“最健康的”组织会立即修复自动化，这样故障就不会再发生了。我们应该学习像之前讨论的 GitLab 的例子，他们在修复问题后立即开始工作，以确保问题不再发生。软件开发团队经常这样做；当发现软体中的bug时，修复了bug，但同时也创建了一个单元测试来重新创建导致这个bug的参数，以确保该bug在未来不会再次出现\(称为回归\)。

故障时有发生。从中学习，并使用一个有助于确保你不会犯两次相同错误的过程。

